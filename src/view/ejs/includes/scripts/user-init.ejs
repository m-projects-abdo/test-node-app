<script>
  let user_name = document.getElementById('user_name');
  let email = document.getElementById('email');
  let user = {};
  window.onload = async () => {
    let res = await fetch('http://localhost:3000/user');
    user = await res.json();
    localStorage.setItem('user', JSON.stringify(user.data));
    user_name.innerText = user.data.name;
    email.value = user.data.email;
  }

  user_name.addEventListener('click', async () => {
    let payload = JSON.parse(localStorage.getItem('user'));
    await fetch('http://localhost:3000/profile', {
      method: 'POST',
      body: JSON.stringify({
        email: payload.email
      }),
      headers: {
        "Content-type": "application/json; charset=UTF-8"
      }
    });
  });
</script>